<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>UIFLO-Product flows platform</title>
    <meta name="description" content="UIFLO-admin page">

    <link rel="shortcut icon" type="image/png" href="src/img/favicon.ico"/>
    <link rel="canonical" href="">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <link type="text/css" rel="stylesheet" href="./mycss.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Rubik' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

    <!-- <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet"> -->
    <link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

    <script>
         let token = localStorage.getItem("token") || "unauth";
            if(token.split(".").length != 3){
                alert("please sigin ")
                window.location.replace("./login.html");
            }

    </script>

</head>
<body lang="en" ng-app="myApp" ng-controller="myCtrl" >
<div class="col-md-12 col-lg-12" style="background: #f7f7f7;padding: 1%;">
    <a href="admin-home.html">
        <div class="col-md-3 col-lg-3" style="color: #666666;font-size: 24px;font-weight: 700;font-family: Rubik;">
            UiFLO ADMIN
        </div>
    </a>
    <div class="col-md-8 col-lg-8" style="color: #A3A3A3;height: 9vh;">
<!--        <div class="col-md-12 col-lg-12 no-padding" style="float: right;font-size: 14px!important;text-align: right;margin-top: 7px;">-->
<!--            <span class="" style="background-color: #3D1369;border-radius: 4px;color: white;padding: 1%;cursor: pointer">NEW MAIL</span> &nbsp;&nbsp;-->
<!--            <span class="" style="background-color: #3D1369;border-radius: 4px;color: white;padding: 1%;cursor: pointer">NEW LANDING PAGE</span> &nbsp;&nbsp;-->
<!--            <span class="" style="background-color: #3D1369;border-radius: 4px;color: white;padding: 1%;cursor: pointer">NEW PRODUCT PAGE</span>-->
<!--        </div>-->
    </div>
<!--    <div class="col-md-2 col-lg-2 no-padding">-->
<!--        <form action="" role="search" class="search-form" style="width: 100%;">-->
<!--            <input type="search" name="q" class="search-text" placeholder="Search..." autocomplete="off" style="width: 100%;height: 100%;">-->
<!--        </form>-->
<!--    </div>-->
    <div class="col-md-1 col-lg-1" style="text-align: center;">

        <div class="containers" style="">
            <!-- Trigger the modal with a button -->
<!--            <div ng-click="logout()" class="col-md-12 col-lg-12" type="button" data-toggle="modal" data-target="#myModal" style="color: #666666;padding: 6%;cursor: pointer">LOGOUT</div>-->

            <!--            <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>-->

            <!-- Modal -->

        </div>
    </div>
</div>

<div class="col-md-12 col-lg-12" style="background: #f7f7f7;">
    <div class="col-md-12 col-lg-12">
        <form class="col-lg-12 col-md-12 no-padding" style="margin-bottom: 8%;"     >
        <div class="col-md-6 col-lg-6" style="font-size: 24px;">Add product flow
        </div>
        <div class="col-md-6 col-lg-6">
               <div class="col-md-12 col-lg-12" style="text-align: center;color: white;">
                   <div class="col-lg-3 col-lg-offset-6 col-md-3 col-md-offset-6" style="cursor: pointer;">
                       <div ng-click="add_product()" style="background-color:#00A384;padding: 3%;border-radius: 4px;">
                           SAVE
                       </div>
                   </div>


                   <div class="col-md-3 col-lg-3" style="">
                       <div ng-click="clear_all()" style="background-color:#00A384;padding: 3%;border-radius: 4px; cursor: pointer;">
                           DELETE
                       </div>
                   </div>
               </div>
        </div>
        <div class="col-md-12 col-lg-12" style="margin-top: 2%;">
           <div class="col-md-6 col-lg-6">
              <div class="col-md-10 col-lg-10">
                  <div style="font-size: 18px;color: #3D1369;text-align: left; margin-bottom: 4%;">ID  </div>
                      <div class="custom-select col-lg-12 col-md-12 no-padding" style="">
                          <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666">Platform</div>
                          <select class="col-lg-12 col-md-12" style="height: 7vh" ng-model="product_details.platform" onclick="drpdown_enable()"  >
<!--                              <option value="0">Select car:</option>-->
                              <option value="Web">Web</option>
                              <option value="Android">Android</option>
                              <option value="ios">ios</option>
                              <option ng-show="userRole == 'admin'" value="refrence">refrence</option>
                          </select>
                          <div ng-show="product_details.platform=='Web'"  class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%"      >Device</div>
                          <select ng-show="product_details.platform=='Web'" class="col-lg-12 col-md-12" id="device" style="height: 7vh" ng-model="product_details.device" >
<!--                              <option value="0">Select car:</option>-->
                              <option value="Desktop">Desktop</option> 
                              <option value="Smartphone">Mobile</option>
                          </select>
                          <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Captured date</div>
                          <input type="date" ng-model="captured_date"  >

                         <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Tags</div>
                         <div class="col-lg-10 col-md-10 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%"> 
                            <select ng-model="product_details.tags" data-placeholder="" multiple class="tags-multiple-select"  style="width: 100% !important;"  >
                                <option value=""></option>
    
                                <option ng-repeat=" each in product_values.tags track by $index"  value="{{each}}"  > {{each}}</option>
                            </select>
                        </div>
                        <div class="col-md-2 col-lg-2" id="myBtn_tags" style="font-size: 14px;color: #666666;margin-top: 3%">
                            <button class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">+</button>
                        </div>
                                <!-- The Modal -->
                                <div id="myModal_tags" class="modal">

                                    <!-- Modal content -->
                                    <div class="col-lg-4 col-lg-offset-5 col-md-offset-5 col-md-4 modal-content">
                                        <span onclick="closeModels()" class=" " style="color: #aaaaaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;"  >&times;</span>
                                        <h4 style="text-align: center;">Add Tags.</h4> 
                                        <div class="col-lg-12 col-md-12 no-padding">
                                            <div class="col-lg-10 col-md-10 col-lg-offset-1 col-md-offset-1 no-padding">
                                                 
                                                <input ng-model="product_details.tags" type="text" placeholder="tags name" class="col-lg-12 col-md-12 no-padding" style="border: 1px solid;border-radius: 4px;height: 6vh;margin-top: 2%;" />
      
                                                </input>
      
      
                                            </div>
                                            <button ng-click="add_productValues('tags', product_details.tags )" class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">save </button>
       
                                        </div>
                                    </div>
                                </div>




                          <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Product

                          </div>
                    <div class="col-lg-12 col-md-12 no-padding">
                        <select id="productAndLogo" ng-change="addLogotoproduct()" class="col-lg-10 col-md-10" style="height: 7vh" ng-model="product_temp"  >
                            
                            <option  ng-repeat="each in product_names  track by $index" value="{{each}}" > {{each.productName}} </option>
 

                        </select>  
                        <!-- <input ng-model="product_details.logo" type='file'  id="screen_shorts_file{{screen}}"  style="width: 100%;"/> -->

                        <div class="col-md-2 col-lg-2" id="myBtn">
                            <button class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">+</button>
                        </div>

                        <!-- The Modal -->
                        <div id="myModal" class="modal">

                            <!-- Modal content -->
                            <div class="col-lg-4 col-lg-offset-5 col-md-offset-5 col-md-4 modal-content">
                                <span onclick="closeModels()" class="close">&times;</span>
                                <h4 style="text-align: center;">Add Product</h4>
                                <div class="col-lg-12 col-md-12 no-padding">
                                    <div class="col-lg-10 col-md-10 col-lg-offset-1 col-md-offset-1 no-padding">
                                        Product
                                        <input ng-model="product_details.product" type="text" placeholder="Product name" class="col-lg-12 col-md-12 no-padding" style="border: 1px solid;border-radius: 4px;height: 6vh;margin-top: 2%;"  >

                                        </input>

                                    </div>
                                    <div class="col-lg-10 col-md-10 col-lg-offset-1 col-md-offset-1 no-padding" style="margin-top: 6%;">
                                        Add Logo ( 100px * 100px )
                                        <div class="col-lg-12 col-md-12 no-padding" style="margin-top: 4%;"  >
                                            <div class="col-lg-4 col-md-4 " style="padding-left: 0;">
                                                <img id="logodisplay" src="https://uiflo.s3.amazonaws.com/uiflo/media/Screenshot_from_2020-04-07_23-22-38.png" alt="your image" style="width: 100%;"/>
                                            </div>
                                            <div class="col-lg-8 col-md-8 " style="padding-right: 0;">
                                                <input   type='file'  id="logo_file"  style="width: 100%;"   />
                                            </div>
                                            <div   ng-click="add_logo()" class="col-lg-4 col-md-4 " style="background-color: #3D1369;border-radius: 4px;color: white;padding: 1%;cursor: pointer;margin-top: 10%;text-align: center"> save </div> &nbsp;&nbsp;
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                          <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Flow</div>
                          <select  class="col-lg-10 col-md-10" style="height: 7vh" ng-model="product_details.flow" ng-change="change_categoey()""  >
                              <!--                              <option value="0">Select car:</option>-->
                              <option ng-repeat=" each in product_values.flow track by $index"  value="{{each}}"  > {{each}}</option>
  
                          </select> 
                          <div class="col-md-2 col-lg-2" id="myBtn_flow">
                              <button class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">+</button>
                          </div>

                          <!-- The Modal -->
                          <div id="myModal_flow" class="modal">

                              <!-- Modal content -->
                              <div class="col-lg-4 col-lg-offset-5 col-md-offset-5 col-md-4 modal-content">
                                  <span onclick="closeModels()" class="close">&times;</span>
                                  <h4 style="text-align: center;">Add Flow</h4>
                                  <div class="col-lg-12 col-md-12 no-padding">
                                      <div class="col-lg-10 col-md-10 col-lg-offset-1 col-md-offset-1 no-padding">
                                          Flow
                                          <input ng-model="product_details.flow" type="text" placeholder="flow name" class="col-lg-12 col-md-12 no-padding" style="border: 1px solid;border-radius: 4px;height: 6vh;margin-top: 2%;" />

                                          </input>


                                      </div>
                                      <button ng-click="add_productValues('flow', product_details.flow )" class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">save </button>

                                  </div>
                              </div>
                          </div>

                                                    
                          <div class="col-lg-10 col-md-10 col-lg-offset-1 col-md-offset-1 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Sub-Flow</div>
                          <select class="col-lg-9 col-md-9 col-lg-offset-1 col-md-offset-1" style="height: 7vh" ng-model="product_details.sub_flow">
                              <!--                              <option value="0">Select car:</option>-->
                              <option ng-repeat=" each in product_values.sub_flow_seleced  track by $index "  value="{{each}}"  > {{each}}</option>

                          </select>
                          <div class="col-md-2 col-lg-2" id="myBtn_subcat">
                              <byutton class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">+</byutton>
                          </div>

                          <!-- The Modal -->
                          <div id="myModal_subcat" class="modal">

                              <!-- Modal content -->
                              <div class="col-lg-4 col-lg-offset-5 col-md-offset-5 col-md-4 modal-content">
                                  <span onclick="closeModels()"  class="close">&times;</span>
                                  <h4 style="text-align: center;">Add Sub Flow</h4>
                                  <div class="col-lg-12 col-md-12 no-padding">
                                      <div class="col-lg-10 col-md-10 col-lg-offset-1 col-md-offset-1 no-padding">
                                          Sub Category
                                          <input ng-model="product_details.sub_flow" type="text" placeholder=" Sub Flow name" class="col-lg-12 col-md-12 no-padding" style="border: 1px solid;border-radius: 4px;height: 6vh;margin-top: 2%;" />

                                          </input>

                                      </div>
                                      <button ng-click="add_productValues('sub_flow', product_details.sub_flow )" class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">save </button>

                                  </div>
                              </div>
                          </div>


                          <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Category</div>
                          <select ng-change="change_categoey()" class="col-lg-10 col-md-10" style="height: 7vh" ng-model="product_details.category"  >
                              <!--                              <option value="0">Select car:</option>-->
                              <option ng-repeat=" each in product_values.category  track by $index "  value="{{each}}"  > {{each}}</option>

                          </select>
                          <div class="col-md-2 col-lg-2" id="myBtn_cat">
                              <button class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">+</button>
                          </div>

                          <!-- The Modal -->
                          <div id="myModal_cat" class="modal">

                              <!-- Modal content -->
                              <div class="col-lg-4 col-lg-offset-5 col-md-offset-5 col-md-4 modal-content">
                                  <span onclick="closeModels()" class="close">&times;</span>
                                  <h4 style="text-align: center;">Add Category</h4>
                                  <div class="col-lg-12 col-md-12 no-padding">
                                      <div class="col-lg-10 col-md-10 col-lg-offset-1 col-md-offset-1 no-padding">
                                          Category
                                          <input ng-model="product_details.category" type="text" placeholder=" Category name" class="col-lg-12 col-md-12 no-padding" style="border: 1px solid;border-radius: 4px;height: 6vh;margin-top: 2%;" />

                                          </input>

                                      </div>     
                                      <button ng-click="add_productValues('category', product_details.category )" class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">save </button>

                                  </div>
                              </div>
                          </div>

                          <div class="col-lg-10 col-md-10 col-lg-offset-1 col-md-offset-1 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Sub-Category</div>
                          <select class="col-lg-9 col-md-9 col-lg-offset-1 col-md-offset-1" style="height: 7vh" ng-model="product_details.sub_category">
                              <!--                              <option value="0">Select car:</option>-->
                              <option ng-repeat=" each in product_values.sub_categoey_seleced  track by $index "  value="{{each}}"  > {{each}}</option>

                          </select>
                          <div class="col-md-2 col-lg-2" id="myBtn_subcat">
                              <button class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">+</button>
                          </div>

                          <!-- The Modal -->
                          <div id="myModal_subcat" class="modal">

                              <!-- Modal content -->
                              <div class="col-lg-4 col-lg-offset-5 col-md-offset-5 col-md-4 modal-content">
                                  <span onclick="closeModels()"  class="close">&times;</span>
                                  <h4 style="text-align: center;">Add Sub Category</h4>
                                  <div class="col-lg-12 col-md-12 no-padding">
                                      <div class="col-lg-10 col-md-10 col-lg-offset-1 col-md-offset-1 no-padding">
                                          Sub Category
                                          <input ng-model="product_details.subcategory" type="text" placeholder=" Sub Category name" class="col-lg-12 col-md-12 no-padding" style="border: 1px solid;border-radius: 4px;height: 6vh;margin-top: 2%;" />

                                          </input>

                                      </div>
                                      <button ng-click="add_productValues('sub_category', product_details.subcategory )" class="w3-button" style="border-radius: 4px;background-color: #3D1369;color: white;">save </button>

                                  </div>
                              </div>
                          </div>
                      </div>

              </div>
           </div>
            <div class="col-md-6 col-lg-6">

                                
                <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Thumbnail</div>
                <div class="col-md-12 no-padding">
                    <input  type="file"   ng-model="thumbnail" id="thumbnail_file"    >
                    <button ng-click="add_Thumbnail()"> upload</button> 


                </div>

                <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Video upload</div>
                <div class="col-md-12 no-padding">
                    <input  type="file"   ng-model="video_file" id="video_file1"    >



                    <!--<div class="col-md-7 no-padding"><input  type="file" name="pic" accept="image/*"></div>-->
                    <div class="upload-btn-wrapper " style="margin-top: 10px;">
                        <!--<input type="file" id="image" name="image"/>-->
                    </div>

                </div>


                <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 3%">Annotations</div>


                <div class="col-lg-12 col-md-12 no-padding" ng-repeat="each in annotations_value  track by $index">
                   <div  class="col-lg-12 col-md-12 no-padding" style="margin-top: 4%;">
                       <div class="col-lg-3 col-md-3 no-padding" style="">
                           <input ng-change="findAnnotationsTime(each)" ng-model="annotations[each].min" class="col-md-5 col-lg-5"  type="number" id="time" name="time" placeholder="mm" style="background: white;margin-right: 8px;height: 7vh;padding: 0;text-align: center;"/>
                           <input ng-change="findAnnotationsTime(each)" ng-model="annotations[each].sec" class="col-md-5 col-lg-5" type="number" id="time" name="time" placeholder="ss" style="background: white;height: 7vh;padding: 0;text-align: center;"/>
                       </div>
                       <div class="col-lg-9 col-md-9 " style="padding-right: 0;">
                           <input ng-model="annotations[each].heading" type="text" id="heading" name="heading" placeholder="heading" style="background: white;"/>
                       </div>
                   </div>
                    <div  class="col-lg-12 col-md-12 no-padding" style="margin-top: 2%">
                        <textarea ng-model="annotations[each].description"  id="description" rows="4" cols="50" name="comment" placeholder="Description" style="width: 100%;border: none !important;padding: 2%;color: #666666;"  ></textarea>
                    </div>
                </div>


                <div class="col-lg-12 col-md-12 no-padding" style=" margin-top: 2%;margin-bottom: 5%;">
                    <span  ng-click="add_next_annotations()"class="" style="background-color: #3D1369;border-radius: 4px;color: white;padding: 1%;cursor: pointer">&nbsp;+&nbsp;</span> &nbsp;&nbsp;

                <span  ng-click="add_video()" class="" style="background-color: #3D1369;border-radius: 4px;color: white;padding: 1%;cursor: pointer"> Upload Video</span> &nbsp;&nbsp;
                </div>


                <i ng-if="video_uploading"  class="fa fa-upload fa-2x" aria-hidden="true"></i>
                <span ng-if="video_uploading"  > uploading...</span>
                <i ng-if="video_uploading"  class="fa fa-cog fa-spin fa-2x" aria-hidden="true"></i>



                <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 8%;margin-bottom: 5%;">Screenshots</div>

                        <div class="col-lg-12 col-md-12 no-padding" style="margin-top: 4%;" ng-repeat="screen in screen_shorts_annotations_value  track by $index">
                            <div class="col-lg-3 col-md-3 " style="padding-left: 0;">
                                <img id="screenshot{{screen}}" src="https://uiflo.s3.amazonaws.com/uiflo/media/Screenshot_from_2020-04-07_23-22-38.png" alt="your image" style="width: 100%;"/>
                            </div>
                            <div class="col-lg-9 col-md-9 " style="padding-right: 0;">
                                <input type='file'  id="screen_shorts_file{{screen}}"  style="width: 100%;"   />
                                <input  type="text" id="screen_short_heading{{screen}}" name="heading" placeholder="heading" style="background: white;margin-top: 4%;"/>

                            </div>
                            <span  ng-click="add_screen_shorts(screen)" class="" style="background-color: #3D1369;border-radius: 4px;color: white;padding: 1%;cursor: pointer"> upload</span> &nbsp;&nbsp;
                        </div>

            <div class="col-lg-12 col-md-12 no-padding" style="font-size: 14px;color: #666666;margin-top: 8%;margin-bottom: 5%;">

                <i ng-if="screen_shorts_uploading"  class="fa fa-upload fa-2x" aria-hidden="true"></i>
                <span ng-if="screen_shorts_uploading"  > uploading...</span>
                <i ng-if="screen_shorts_uploading"  class="fa fa-cog fa-spin fa-2x" aria-hidden="true"></i>

            </div>


            </div>
        </div>
        </form>
    </div>
</div>

</body>

<!-- ############################# angular js start ############################# -->

<script>
     
    $('.tags-multiple-select').select2({
    
    });

    setTimeout(console.log.bind(console, '%c⚠', 'font-weight: bold; font-size: 320px;color: red; text-shadow: 3px 1px 0 rgb(217,217,38)'));
    setTimeout(console.log.bind(console, '%c☠', 'font-weight: bold; font-size: 320px;color: red; text-shadow: 3px 1px 0 rgb(217,217,38)'));


    var app = angular.module('myApp', []);
    app.controller('myCtrl', function($scope, $http, $timeout) {

        $scope.video_uploading = false;
        $scope.product_details = {};

        $scope.product_details.media = []



        $scope.CheckUser = function() {

            var headers = {"Authorization": "Token " + window.localStorage.getItem("token")}
            $scope.userId = window.localStorage.getItem('userId') || "unknown"
            $http({
                method: "GET",
                url: "http://13.126.184.35:8000/user/" + $scope.userId + "/" ,
                headers :headers
                })
            .then(function(response) {
                $scope.user = response.data;
                console.log($scope.user)

                if($scope.user.is_admin){
                    $scope.userRole = "admin"
                }
                else if($scope.user.is_staff){
                    $scope.userRole = "staff"
                    $scope.ListRefrence();
                }
                else{
                    $scope.userRole = "normal"
                }

                if( ["normal"].includes($scope.userRole) ){
                    window.location.replace("./index.html");
                }

             
            }
            ).catch(function error() {
                // alert("please sigin")
                // window.location.replace("./index.html");

            })
            ;

            }
            $scope.CheckUser();



        $scope.addLogotoproduct = function() {  
            var temp = JSON.parse($scope.product_temp)
            $scope.product_details.logo = temp.logo
            $scope.product_details.product = temp.productName
        }

        $scope.get_product_values = function() {

            var headers = {"Authorization": "Token " + window.localStorage.getItem("token")}
            $http({
                method: "GET",
                url: "http://13.126.184.35:8000/getProductValues/", 
                headers :headers
                }) 
            .then(function(response) {
                $scope.product_values = response.data; 
            });
        }
        $scope.get_product_values()


        $scope.get_product_name = function() {

            var headers = {"Authorization": "Token " + window.localStorage.getItem("token")}
            $http({
                method: "GET",
                url: "http://13.126.184.35:8000/productname/", 
                headers :headers
                }) 
            .then(function(response) {
                $scope.product_names = response.data.results; 
                closeModels()
            });
        }
        $scope.get_product_name()
        
        $scope.add_product = function() {

            if($scope.captured_date){
                $scope.product_details.captured_date = $scope.captured_date.toISOString().substring(0, 10);
            }
            console.log($scope.product_details);
            if(!$scope.product_details.sub_category){
                delete $scope.product_details['sub_category']
            }
            if(!$scope.product_details.sub_flow){
                delete $scope.product_details['sub_flow']
            }
            var headers = {"Authorization": "Token " + window.localStorage.getItem("token")}
            $http({
                method: "POST",
                url: "http://13.126.184.35:8000/product/",
                data: $scope.product_details,
                headers :headers
                }) 
            .then(function(response) {
                $scope.myWelcome = response.data;
                alert("product added")
            })
            .catch(function(response) {
                $scope.myWelcome = response.data;
                let error_message =  response.data.error.message.split("violates")[0]
                alert(error_message)
                console.log(response)
            });
        }
        
        $scope.add_productValues = function(key,value) {
 
            var headers = {"Authorization": "Token " + window.localStorage.getItem("token")}
            data = {
                    key : key,
                    value: value
                }
            if(key == "sub_category"){
                data['category'] = $scope.product_details.category
            }
            if(key == "sub_flow"){
                data['flow'] = $scope.product_details.flow
            }
            $http({
                method: "POST",
                url: "http://13.126.184.35:8000/creareProductValues/",
                data: data,
                headers :headers
                }) 
            .then(function(response) {
                $scope.res = response.data;
                console.log(response.data)
                $scope.product_values[key] = response.data['values']
                if(key == "sub_category" || key == 'sub_flow'){

                    $scope.change_categoey()
                }
                closeModels()
            });
        }

        
        $scope.change_categoey = function() { 
            console.log($scope.product_values['sub_category'])

            $scope.product_values['sub_categoey_seleced'] = $scope.product_values['sub_category'][$scope.product_details.category]
            $scope.product_values['sub_flow_seleced'] = $scope.product_values['sub_flow'][$scope.product_details.flow]

        }


        $scope.annotations_value =[0];
        $scope.annotations_next_value = 1;

        $scope.screen_shorts_annotations_value =[0];
        $scope.screen_shorts_annotations_next_value = 1;

        $scope.annotations=[];

        $scope.findAnnotationsTime = function(index) {

            if(!$scope.annotations[index].min){
                $scope.annotations[index].min = 0
            }
           if(!$scope.annotations[index].sec){
                $scope.annotations[index].sec = 0
            }
            if($scope.annotations[index].min < 0){
                $scope.annotations[index].min = 0
            }
            if($scope.annotations[index].sec < 0){
                $scope.annotations[index].sec = 0
            }
            if($scope.annotations[index].sec > 59){
                $scope.annotations[index].sec = 0
            }
            
            $scope.annotations[index].time =  $scope.annotations[index].min * 60 + $scope.annotations[index].sec
             
            
        }

        $scope.add_next_annotations = function() {
            $scope.annotations_value.push($scope.annotations_next_value)
            $scope.annotations_next_value += 1;
        }
        $scope.add_next_screen_shorts_annotations = function() {
            $scope.screen_shorts_annotations_value.push($scope.screen_shorts_annotations_next_value)
            $scope.screen_shorts_annotations_next_value += 1;
        }


        $scope.add_Thumbnail = function() {
            $scope.thumbnail_uploading = true;

            var f = document.getElementById('thumbnail_file').files[0]; 


            var myHeaders = new Headers();
            myHeaders.append("Authorization", "Token " + window.localStorage.getItem("token"))
            var url = "http://13.126.184.35:8000/files/";
            var formdata = new FormData();
            formdata.append("annotations", JSON.stringify($scope.annotations));
            formdata.append("media_type", "thumbnail");
            formdata.append("file", document.getElementById('thumbnail_file').files[0]);
            var requestOptions = {
              method: 'POST',
              headers: myHeaders,
              body: formdata,
              redirect: 'follow'
            };

            fetch(url, requestOptions)
            .then(response => response.text()
            )
            .then((result) =>{
                console.log(result)
                $scope.thumbnail_uploading = false;
                result = JSON.parse(result)
                if(result.error){
                    alert(result.error.message)
                }else{

                    $scope.product_details.thumbnail = result.file

                }
                $scope.thumbnail_uploading = false;
                $timeout(function () {
                    $scope.$apply();
                });
            })
            .catch(error => {
                $scope.video_uploading = false;
                console.log('error', error)
            });
        };


        $scope.add_video = function() {
            $scope.video_uploading = true;

            var f = document.getElementById('video_file1').files[0];
            console.log(document.getElementById('video_file1').files)


            var myHeaders = new Headers();
            myHeaders.append("Authorization", "Token " + window.localStorage.getItem("token"))
            var url = "http://13.126.184.35:8000/files/";
            var formdata = new FormData();
            formdata.append("annotations", JSON.stringify($scope.annotations));
            formdata.append("media_type", "video");
            formdata.append("file", document.getElementById('video_file1').files[0]);
            var requestOptions = {
              method: 'POST',
              headers: myHeaders,
              body: formdata,
              redirect: 'follow'
            };

            fetch(url, requestOptions)
            .then(response => response.text()
            )
            .then((result) =>{
                console.log(result)
                $scope.video_uploading = false;
                result = JSON.parse(result)
                if(result.error){
                    alert(result.error.message)
                }else{

                    $scope.product_details.media.push(result.uuid)

                }
                $scope.video_uploading = false;
                $timeout(function () {
                    $scope.$apply();
                });
            })
            .catch(error => {
                $scope.video_uploading = false;
                console.log('error', error)
            });
        };


        $scope.add_screen_shorts = function(count) {
            $scope.screen_shorts_uploading = true;
            console.log(count)

            var f = document.getElementById('screen_shorts_file'+ count.toString() ).files[0];
            console.log(f)


            var myHeaders = new Headers();
            myHeaders.append("Authorization", "Token " + window.localStorage.getItem("token"))
            var url = "http://13.126.184.35:8000/files/";
            var formdata = new FormData();
            var ano = [{"heading": document.getElementById("screen_short_heading"+ count.toString()).value}]
            console.log(ano)
            formdata.append("annotations", JSON.stringify( ano ));
            formdata.append("media_type", "screenshort");
            formdata.append("file", f);
            var requestOptions = {
              method: 'POST',
              headers: myHeaders,
              body: formdata,
              redirect: 'follow'
            };

            fetch(url, requestOptions)
            .then(response => response.text()
            )
            .then((result) =>{
                console.log(result)
                result = JSON.parse(result)
                if(result.error){
                    alert(result.error.message)
                }else{
                    document.getElementById('screenshot'+ count.toString()).src = result.file;
                    $scope.product_details.media.push(result.uuid)
                    $scope.add_next_screen_shorts_annotations()

                }
                $scope.screen_shorts_uploading = false;
                $timeout(function () {
                    $scope.$apply();
                });
            })
            .catch(error => {
                $scope.screen_shorts_uploading = false;
                console.log('error', error)
            });
        };


        $scope.add_logo = function() {
 

            var f = document.getElementById('logo_file').files[0];
            console.log(f)


            var myHeaders = new Headers();
            myHeaders.append("Authorization", "Token " + window.localStorage.getItem("token"))
            var url = "http://13.126.184.35:8000/productname/";
            var formdata = new FormData(); 
 
            formdata.append("productName", $scope.product_details.product);
            formdata.append("logo", f); 
            var requestOptions = {
              method: 'POST',
              headers: myHeaders,
              body: formdata,
              redirect: 'follow'
            };

            fetch(url, requestOptions)
            .then(response => response.text()
            )
            .then((result) =>{
                console.log(result)
                result = JSON.parse(result)
                console.log(result)
                $scope.product_details.logo = result.logo
                document.getElementById('logodisplay').src = result.logo;


                if(result.error){
                    alert(result.error.message)
                }else{
                    $scope.product_details.logo = result.logo
                    document.getElementById('logodisplay').src = result.logo;
                    $scope.product_temp = result
                    $scope.product_names.push(result)

                    $scope.product_details.logo = result.logo
                    $scope.product_details.product = result.productName
                    closeModels()

                } 
                $timeout(function () {
                    $scope.$apply();
                });
            })
            .catch(error => {
                $scope.screen_shorts_uploading = false;
                console.log('error', error)
            });
        };


        $scope.clear_all = function() {

            $scope.product_details = {};
            $scope.product_details.media = []
            $scope.annotations_value =[0];
            $scope.annotations_next_value = 1;

            $scope.screen_shorts_annotations_value =[0];
            $scope.screen_shorts_annotations_next_value = 1;

            $scope.annotations=[];
        }

        // $scope.checkSigin = function() {
        //     $scope.token = localStorage.getItem("token") || "unauth";
        //     if($scope.token.split(".").length != 3){
        //         alert("please sigin ")
        //         window.location.replace("./index.html");
        //     }
        //
        // }

        $scope.logout = function() {
            localStorage.setItem("token","");
            localStorage.setItem("userId","");
            window.location.replace("./index.html");
        }



        // $scope.checkSigin();

    });


    
    gapi.load('auth2', function() {
        gapi.auth2.init();
      });

    function signOut() {
        


        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
            window.localStorage.setItem("token","")
            window.localStorage.setItem("userId","")
            console.log('User signed out.');
            window.location.replace("./index.html");
        });
    } 
 
</script>


<!-- ############################# angular js end ############################# -->



<script>
    document.getElementById("device").disabled = true;
    function drpdown_enable() {
        document.getElementById("device").disabled = false;
    }

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah')
                    .attr('src', e.target.result);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }

    $("#myModal").on("show", function () {
        $("body").addClass("modal-open");
    }).on("hidden", function () {
        $("body").removeClass("modal-open")
    });
 
    // Get the modal
    var modal = document.getElementById("myModal");
    var modal_flow = document.getElementById("myModal_flow");
    var modal_tags = document.getElementById("myModal_tags");
    var modal_cat = document.getElementById("myModal_cat");
    var modal_subcat = document.getElementById("myModal_subcat");

    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");
    var btn_flow = document.getElementById("myBtn_flow");
    var btn_tags = document.getElementById("myBtn_tags");
    var btn_cat = document.getElementById("myBtn_cat");
    var btn_subcat = document.getElementById("myBtn_subcat");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0]; 

    // When the user clicks the button, open the modal
    btn.onclick = function() {
        modal.style.display = "block";
    }
    btn_flow.onclick = function() {
        modal_flow.style.display = "block";
    }
    btn_tags.onclick = function() {
        modal_tags.style.display = "block";
    }
    btn_cat.onclick = function() {
        modal_cat.style.display = "block";
    }
    btn_subcat.onclick = function() {
        modal_subcat.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal

    function closeModels() { 
        modal.style.display = "none";
        modal_flow.style.display = "none";
        modal_tags.style.display = "none";
        modal_cat.style.display = "none";
        modal_subcat.style.display = "none";
        modal_tags.style.display = "none";
    }
 
    span.onclick = function() {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
        if (event.target == modal_flow) {
            modal_flow.style.display = "none";
        }
        if (event.target == modal_tags) {
            modal_tags.style.display = "none";
        }
        if (event.target == modal_cat) {
            modal_cat.style.display = "none";
        }
        if (event.target == modal_subcat) {
            modal_subcat.style.display = "none";
        }
    }

 
 
 
    function closeAllSelect(elmnt) {
        /*a function that will close all select boxes in the document,
        except the current select box:*/
        var x, y, i, arrNo = [];
        x = document.getElementsByClassName("select-items");
        y = document.getElementsByClassName("select-selected");
        for (i = 0; i < y.length; i++) {
            if (elmnt == y[i]) {
                arrNo.push(i)
            } else {
                y[i].classList.remove("select-arrow-active");
            }
        }
        for (i = 0; i < x.length; i++) {
            if (arrNo.indexOf(i)) {
                x[i].classList.add("select-hide");
            }
        }
    }
    /*if the user clicks anywhere outside the select box,
    then close all select boxes:*/
    document.addEventListener("click", closeAllSelect);


 



</script>
<style>
    body.modal-open {
        overflow: hidden;
    }
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
        background-color: #fefefe;
        padding: 2%;
        border: 1px solid #888;
    }

    /* The Close Button */
    .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }


    [type="date"] {
        background:#fff url(https://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/calendar_2.png)  97% 50% no-repeat ;
    }
    [type="date"]::-webkit-inner-spin-button {
        display: none;
    }
    [type="date"]::-webkit-calendar-picker-indicator {
        opacity: 0;
    }

    label {
        display: block;
    }
    input {
        border: 1px solid black;
        border-radius: 5px;
        background-color: #fff;
        padding: 3px 5px;
        width: 190px;
    }

    .row {
        display: -ms-flexbox; /* IE10 */
        display: flex;
        -ms-flex-wrap: wrap; /* IE10 */
        flex-wrap: wrap;
        padding: 0 4px;
    }

    /* Create four equal columns that sits next to each other */
    .column {
        -ms-flex: 25%; /* IE10 */
        flex: 25%;
        max-width: 25%;
        padding: 0 4px;
    }

    .column img {
        margin-top: 8px;
        vertical-align: middle;
        width: 100%;
    }

    /* Responsive layout - makes a two column-layout instead of four columns */
    @media screen and (max-width: 800px) {
        .column {
            -ms-flex: 50%;
            flex: 50%;
            max-width: 50%;
        }
    }

    /* Responsive layout - makes the two columns stack on top of each other instead of next to each other */
    @media screen and (max-width: 600px) {
        .column {
            -ms-flex: 100%;
            flex: 100%;
            max-width: 100%;
        }
    }

 
    input {
        border: 1px solid transparent;
        background-color: #f1f1f1;
        padding: 10px;
        font-size: 16px;
    }

    input[type=text] {
        background-color: #f1f1f1;
        width: 100%;
    }

    input[type=submit] {
        background-color: DodgerBlue;
        color: #fff;
        cursor: pointer;
    }

 

    input{
        color: #444;
        font-family: 'Roboto', sans-serif;
        font-weight: 300;
    }
    /* Expandable search box */
    /* Note: don't change 0.8s in transition. */
    /* --------------------- */
    input.search-text {
        background: #EDEDED;
        border: 0;
        color: #222;
        position:relative;
        z-index:5;
        /* 	transition: z-index 0.8s, width 0.5s, background 0.3s ease, border 0.3s; */
        box-sizing: border-box;
        font-size: 16px;
        font-size: 1rem;
        cursor: pointer;
        border-radius: 4px;
        /*border: 1px solid #666666;*/
        /*background: url(search.png) no-repeat left 9px center transparent;*/
        /*background: url('https://static.tumblr.com/ftv85bp/MIXmud4tx/search-icon.png') no-repeat right 9px center transparent;*/
        /*background-size:24px;*/
    }
    /* input.search-text:focus {
        z-index:3;
        width: 270px;
        border: 1px solid #666;
        background-color: white;
        outline: none;
        cursor:auto;
        padding-right: 10px;
    } */

    input.search-submit {
        position: relative;
        z-index: 4;
        top:17px;
        left: 49px;
        width: 270px;
        height: 45px;
        margin: 0;
        padding: 0;
        border: 0;
        outline: 0;
        border-radius: 4px;
        cursor: pointer;
        background: none;
    }

    input.search-text::-webkit-search-cancel-button {
        cursor:pointer;
    }
    .no-padding {
        padding: 0px !important;
    }

    * {
        box-sizing: border-box;
    }

    /* style the container */
    .container {
        position: relative;
        border-radius: 5px;
        background-color: #f2f2f2;
        padding: 20px 0 30px 0;
    }

    /* style inputs and link buttons */
    input,
    .btn {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 4px;
        margin: 5px 0;
        opacity: 0.85;
        display: inline-block;
        font-size: 17px;
        line-height: 20px;
        text-decoration: none; /* remove underline from anchors */
    }

    input:hover,
    .btn:hover {
        opacity: 1;
    }

    /* add appropriate colors to fb, twitter and google buttons */
    .fb {
        background-color: #3B5998;
        color: white;
    }

    .twitter {
        background-color: #55ACEE;
        color: white;
    }

    .google {
        background-color: #dd4b39;
        color: white;
    }

    /* style the submit button */
    input[type=submit] {
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
    }

    input[type=submit]:hover {
        background-color: #45a049;
    }

    /* Two-column layout */
    .col {
        float: left;
        width: 50%;
        margin: auto;
        padding: 0 50px;
        margin-top: 6px;
    }

    /* Clear floats after the columns */
    .row:after {
        content: "";
        display: table;
        clear: both;
    }

    /* vertical line */
    .vl {
        position: absolute;
        left: 50%;
        transform: translate(-50%);
        border: 2px solid #ddd;
        height: 175px;
    }

    /* text inside the vertical line */
    .vl-innertext {
        position: absolute;
        top: 50%;
        transform: translate(-50%, -50%);
        background-color: #f1f1f1;
        border: 1px solid #ccc;
        border-radius: 50%;
        padding: 8px 10px;
    }

    /* hide some text on medium and large screens */
    .hide-md-lg {
        display: none;
    }

    /* bottom container */
    .bottom-container {
        text-align: center;
        background-color: #666;
        border-radius: 0px 0px 4px 4px;
    }

    /* Responsive layout - when the screen is less than 650px wide, make the two columns stack on top of each other instead of next to each other */
    @media screen and (max-width: 650px) {
        .col {
            width: 100%;
            margin-top: 0;
        }
        /* hide the vertical line */
        .vl {
            display: none;
        }
        /* show the hidden text on small screens */
        .hide-md-lg {
            display: block;
            text-align: center;
        }
    }
    .form-group {
        margin-bottom: 1rem;
        max-width: 350px;
    }

 
    .upload-btn-wrapper {
        position: relative;
        overflow: hidden;
        display: inline-block;
    }

    .upload-btn-wrapper input[type=file] {
        font-size: 100px;
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
    }
    input.placeholder {
        text-align: center;
    }

</style>
</html>
